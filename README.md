# FISCO BCOS Evidence Chain Demo
由杭州亦笔科技有限公司开发的针对基于 FISCO BCOS 的区块链电子存证平台案例。

## 1.背景概述

​		随着人们的生活和工作越来越互联网化，产生了大量的线上交互业务的电子数据，但电子数据具有易变性、易改无痕性等特性。作为平台出现问题后最基本的维权资料，这些易变易改的电子数据往往都存管于平台自身的服务器中，若没有第三方或者权威机构的介入，如何证明这些数据有没有被篡改过？平台的在线合同基本由系统生成，其是否具有法律效力，是否能在诉讼中被法院采纳？故交易双方与平台方都需要保存这些电子数据，并使用技术确保这些电子数据的客观性、完整性与真实性，而不是被篡改、被删改、被伪造的，才能够在纠纷产生时作为可以置信的电子数据证据呈上法庭。并且随着互联网应用的飞速发展，大量这些业务平台需要能够将电子数据实时存储，并能够同步到第三方中立的电子证据存管机构，然后政府、司法机构将这些第三方电子证据存管机构使用标准与规范监管起来，并能够随时根据需要，查询与提取相应的电子证据，另外还可能需要公证处与司法鉴定，来进一步确认电子证据的真实性与完整性。这些就要求建立一个电子证据管理平台系统，能够包括所有这些管理功能，并形式一整套标准与规范。

## 2.解决方案

​		全数据生命周期电子数据存管与证明解决方案理念的提出，从电子数据的特征、到人民法院审理案件对证据的要求、再到电子数据的存管，提供了一整套完整的解决方案。电子数据易变、易改无痕、不易固化呈现和归档的特征，与人民法院审理案件对证据的要求：相对固定的、没有被篡改的、能在法庭上直观呈现并能卷宗归档是相悖的。而该解决方案从数据的生成和创建、传输和存储、数据取得三个方面解决：数据生成和创建时就同步实施“实时完整性备份”，在第一时间（最短的时间）解决了证据固化和保存；最高级别加密传输保护、公安部完整性鉴别、分布式云存储隔离和安全防护保障，保证数据实时同步备份过程及存储过程中没有被篡改，从而保证证据的真实性；引入司法机构参与存证的监察管理，并以电子证书的形式对此电子数据内容进行直观呈现和形式固定，解决证据取得、法庭质证呈现及归档问题。

​		采用区块链可信连接等方式，引入金融机构、存证机构、司法机构组成数据保全联盟链，实现客户每一次线上操作，联盟链全程广播，各节点实时记录，并利用区块链技术的实时监控广播情况、上链情况、留痕情况、证据保全状态、防抵赖等，建立新型的电子数据证据保存系统。

## 3.系统架构

![](https://github.com/maochaowu/evidenceImage/blob/main/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.png?raw=true)

### 3.1业务流程

#### 3.1.1应用注册及合约部署流程

![](https://github.com/maochaowu/evidenceImage/blob/main/%E5%BA%94%E7%94%A8%E6%B3%A8%E5%86%8C%E5%8F%8A%E5%90%88%E7%BA%A6%E9%83%A8%E7%BD%B2.png?raw=true)

- 系统部署后，通过管理员账号登录，登录成功后系统会判断是否已部署好电子存证合约，没部署则先调用WeBASE开放接口进行应用注册；
- 应用注册好，调用WeBASE开放接口新增私钥用户；
- 私钥用户新增完成后，调用WeBASE Front 模块中的合约部署接口；
- 合约部署完成后，调用WeBASE开放接口进行合约原文保存；
- 合约原文保存后，调用WeBASE开放接口进行合约地址保存。

#### 3.1.2存证数据上链

![](https://github.com/maochaowu/evidenceImage/blob/main/%E5%AD%98%E8%AF%81%E6%95%B0%E6%8D%AE%E4%B8%8A%E9%93%BE.png?raw=true)

- 电子数据存证后，会通过哈希算法对存证数据（原文or附件）进行摘要计算，计算完后针对哈希进行签名；
- 调用WeBASE Front的交易处理接口，进行存证合约的调用，实现存证数据哈希上链；
- 其他机构进行签名并调用WeBASE Front的交易处理接口，实现存证数据哈希签名上链。

#### 3.1.3存证数据核验

![](https://github.com/maochaowu/evidenceImage/blob/main/%E5%AD%98%E8%AF%81%E6%95%B0%E6%8D%AE%E6%A0%B8%E9%AA%8C.png?raw=true)

- 针对要进行数据核验的数据，首先获取到其上链地址；
- 根据合约地址调用WeBASE Front已编码查询交易发送接口，查询出链上存储的上链信息；
- 比对存证系统中的数据和链上获取的到数据是否一致。

## 4.系统运行

### 4.1准备工作

#### 4.1.1联盟链搭建

搭建单群组FISCO BCOS联盟链，可以参考下述地址进行创建

```
https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/installation.html#fisco-bcos
```

#### 4.1.2WeBASE组件搭建

一键部署在同机快速搭建WeBASE管理台环境，方便用户快速体验WeBASE管理平台，可以参考下述地址进行创建

```
https://webasedoc.readthedocs.io/zh_CN/latest/docs/WeBASE/install.html
```

### 4.2WeBASE创建应用

#### 4.2.1新建应用

![](https://github.com/maochaowu/evidenceImage/blob/main/%E5%BA%94%E7%94%A8%E6%B7%BB%E5%8A%A0.png?raw=true)

- WeBASE管理台部署好后，登录进入管理平台，在应用管理菜单中，点击新建应用，选择自定义应用；
- 输入区块链电子存证平台应用相关信息后，点击确定按钮，完成应用添加。

#### 4.2.2查看注册信息

![](https://github.com/maochaowu/evidenceImage/blob/main/%E5%AD%98%E8%AF%81%E5%BA%94%E7%94%A8%E6%B3%A8%E5%86%8C%E4%BF%A1%E6%81%AF.png?raw=true)

